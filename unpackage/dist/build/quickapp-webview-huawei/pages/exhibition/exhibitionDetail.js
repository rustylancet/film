(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/exhibition/exhibitionDetail"],{4154:function(n,e,t){"use strict";var o=t("8aa1"),i=t.n(o);i.a},"46e1":function(n,e,t){"use strict";t.r(e);var o=t("4d62"),i=t("4b71");for(var u in i)"default"!==u&&function(n){t.d(e,n,(function(){return i[n]}))}(u);t("4154");var r,c=t("f0c5"),a=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"90273730",null,!1,o["a"],r);e["default"]=a.exports},"4b71":function(n,e,t){"use strict";t.r(e);var o=t("f5aa"),i=t.n(o);for(var u in o)"default"!==u&&function(n){t.d(e,n,(function(){return o[n]}))}(u);e["default"]=i.a},"4d62":function(n,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return u})),t.d(e,"a",(function(){return o}));var o={uGap:function(){return t.e("node-modules/uview-ui/components/u-gap/u-gap").then(t.bind(null,"89d5"))},uImage:function(){return t.e("node-modules/uview-ui/components/u-image/u-image").then(t.bind(null,"b834"))},uIcon:function(){return t.e("node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,"7ca2"))},uReadMore:function(){return t.e("node-modules/uview-ui/components/u-read-more/u-read-more").then(t.bind(null,"af1a"))},uTag:function(){return t.e("node-modules/uview-ui/components/u-tag/u-tag").then(t.bind(null,"9e03"))}},i=function(){var n=this,e=n.$createElement;n._self._c},u=[]},"8aa1":function(n,e,t){},cb6a:function(n,e,t){"use strict";(function(n){t("a9fa");o(t("66fd"));var e=o(t("46e1"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("8adf")["createPage"])},f5aa:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(t("a34a"));function i(n){return n&&n.__esModule?n:{default:n}}function u(n,e,t,o,i,u,r){try{var c=n[u](r),a=c.value}catch(s){return void t(s)}c.done?e(a):Promise.resolve(a).then(o,i)}function r(n){return function(){var e=this,t=arguments;return new Promise((function(o,i){var r=n.apply(e,t);function c(n){u(r,o,i,c,a,"next",n)}function a(n){u(r,o,i,c,a,"throw",n)}c(void 0)}))}}var c=function(){t.e("components/common/footerTab").then(function(){return resolve(t("e346"))}.bind(null,t)).catch(t.oe)},a=function(){t.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(t("c383"))}.bind(null,t)).catch(t.oe)},s=function(){t.e("pages/film/child/makePanel").then(function(){return resolve(t("a140"))}.bind(null,t)).catch(t.oe)},l={name:"exhibitionDetail",components:{uniNavBar:a,footerTab:c,makePanel:s},data:function(){return{height:n.getSystemInfoSync().screenHeight-84,exhibition:{},like:!1,collection_id:0,ifappoint:!1}},methods:{back:function(){n.navigateBack()},jump:function(n,e){this.$Router.push({path:n,query:e})},ifLike:function(){var e=this;return r(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request({url:"users/colllections/ifLike",method:"post",data:{type:"4",production_id:e.$Route.query.exhibition_id},success:function(n){e.like=n.data},fail:function(e){console.log(e),n.showToast({icon:"none",position:"center",title:"404 error"})}});case 2:case"end":return t.stop()}}),t)})))()},ifAppoint:function(){var e=this;return r(o.default.mark((function t(){var i;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,e.$request({url:"exhibitions/ifappoint/"+e.$Route.query.exhibition_id,method:"post",success:function(n){i.ifappoint=n.data,console.log("ifappoint",i.ifappoint)},fail:function(e){console.log(e),n.showToast({icon:"none",position:"center",title:"404 error"})}});case 3:case"end":return t.stop()}}),t)})))()},getCollectionId:function(){var e=this;return r(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request({url:"users/colllections/id",method:"post",data:{type:"4",production_id:e.$Route.query.exhibition_id},success:function(n){e.collection_id=n.data,e.cancel(e.collection_id)},fail:function(e){console.log(e),n.showToast({icon:"none",position:"center",title:"404 error"})}});case 2:case"end":return t.stop()}}),t)})))()},cancel:function(e){var t=this;return r(o.default.mark((function i(){return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$request({url:"users/collections/cancel/"+e,method:"post",success:function(n){t.like=!1},fail:function(e){console.log(e),n.showToast({icon:"none",position:"center",title:"404 error"})}});case 2:case"end":return o.stop()}}),i)})))()},getDetail:function(){var e=this;return r(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request({url:"exhibitions/detail/"+e.$Route.query.exhibition_id,method:"get",success:function(n){e.exhibition=n.data||[]},fail:function(t){console.log(t),e.exhibition="fail",n.showToast({icon:"none",position:"center",title:"404 error"})}});case 2:case"end":return t.stop()}}),t)})))()},appoint:function(){var e=this;return r(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request({url:"exhibitions/appoint",method:"post",data:{exhibition_id:e.$Route.query.exhibition_id},success:function(e){n.showToast({icon:"none",position:"center",title:"预约成功"})},fail:function(e){console.log(e),n.showToast({icon:"none",position:"center",title:"404 error"})}});case 2:case"end":return t.stop()}}),t)})))()},collect:function(){var e=this;return r(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request({url:"exhibitions/collect/4",method:"post",data:{exhibition_id:e.$Route.query.exhibition_id},success:function(t){n.showToast({icon:"none",position:"center",title:"收藏成功"}),e.like=!0,e.collection_id=t.data.collection_id},fail:function(e){console.log(e),n.showToast({icon:"none",position:"center",title:"404 error"})}});case 2:case"end":return t.stop()}}),t)})))()},cancelAppo:function(){n.showToast({icon:"none",position:"center",title:"您已预约"})}},onShow:function(){this.getDetail(),this.ifLike(),this.ifAppoint()}};e.default=l}).call(this,t("8adf")["default"])}},[["cb6a","common/runtime","common/vendor"]]]);